{"version":3,"sources":["node_modules/bricks.js/dist/bricks.module.js","src/index.js"],"names":["bricks","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","knot","extended","undefined","events","create","on","name","handler","push","off","splice","indexOf","once","_once","emit","_this","_len","args","Array","_key","cache","slice","forEach","apply","options","persist","ticking","sizeIndex","sizeDetail","columnTarget","columnHeights","nodeTop","nodeLeft","nodeWidth","nodeHeight","nodes","nodesWidths","nodesHeights","packed","sizes","reverse","position","container","nodeType","document","querySelector","selectors","all","toArray","children","new","filter","node","hasAttribute","setup","setSizeIndex","getSizeIndex","setSizeDetail","setColumns","columns","map","fillArray","run","setNodes","setNodesDimensions","element","clientWidth","clientHeight","setNodesStyles","index","Math","min","style","gutter","top","left","transform","setAttribute","setContainerStyles","width","height","max","instance","pack","update","runSeries","resize","flag","window","resizeFrame","functions","func","input","size","mq","matchMedia","matches","requestAnimationFrame","resizeHandler","concat","margin"],"mappings":"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","file":"src.9a988237.js","sourceRoot":"..","sourcesContent":["var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar knot = function knot() {\n  var extended = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var events = Object.create(null);\n\n  function on(name, handler) {\n    events[name] = events[name] || [];\n    events[name].push(handler);\n    return this;\n  }\n\n  function once(name, handler) {\n    handler._once = true;\n    on(name, handler);\n    return this;\n  }\n\n  function off(name) {\n    var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    handler ? events[name].splice(events[name].indexOf(handler), 1) : delete events[name];\n\n    return this;\n  }\n\n  function emit(name) {\n    var _this = this;\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // cache the events, to avoid consequences of mutation\n    var cache = events[name] && events[name].slice();\n\n    // only fire handlers if they exist\n    cache && cache.forEach(function (handler) {\n      // remove handlers added with 'once'\n      handler._once && off(name, handler);\n\n      // set 'this' context, pass args to handlers\n      handler.apply(_this, args);\n    });\n\n    return this;\n  }\n\n  return _extends({}, extended, {\n\n    on: on,\n    once: once,\n    off: off,\n    emit: emit\n  });\n};\n\nvar bricks = function bricks() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  // privates\n\n  var persist = void 0; // packing new elements, or all elements?\n  var ticking = void 0; // for debounced resize\n\n  var sizeIndex = void 0;\n  var sizeDetail = void 0;\n\n  var columnTarget = void 0;\n  var columnHeights = void 0;\n\n  var nodeTop = void 0;\n  var nodeLeft = void 0;\n  var nodeWidth = void 0;\n  var nodeHeight = void 0;\n\n  var nodes = void 0;\n  var nodesWidths = void 0;\n  var nodesHeights = void 0;\n\n  // resolve options\n\n  var packed = options.packed.indexOf('data-') === 0 ? options.packed : 'data-' + options.packed;\n  var sizes = options.sizes.slice().reverse();\n  var position = options.position !== false;\n\n  var container = options.container.nodeType ? options.container : document.querySelector(options.container);\n\n  var selectors = {\n    all: function all() {\n      return toArray(container.children);\n    },\n    new: function _new() {\n      return toArray(container.children).filter(function (node) {\n        return !node.hasAttribute('' + packed);\n      });\n    }\n  };\n\n  // series\n\n  var setup = [setSizeIndex, setSizeDetail, setColumns];\n\n  var run = [setNodes, setNodesDimensions, setNodesStyles, setContainerStyles];\n\n  // instance\n\n  var instance = knot({\n    pack: pack,\n    update: update,\n    resize: resize\n  });\n\n  return instance;\n\n  // general helpers\n\n  function runSeries(functions) {\n    functions.forEach(function (func) {\n      return func();\n    });\n  }\n\n  // array helpers\n\n  function toArray(input) {\n    var scope = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n    return Array.prototype.slice.call(input);\n  }\n\n  function fillArray(length) {\n    return Array.apply(null, Array(length)).map(function () {\n      return 0;\n    });\n  }\n\n  // size helpers\n\n  function getSizeIndex() {\n    // find index of widest matching media query\n    return sizes.map(function (size) {\n      return size.mq && window.matchMedia('(min-width: ' + size.mq + ')').matches;\n    }).indexOf(true);\n  }\n\n  function setSizeIndex() {\n    sizeIndex = getSizeIndex();\n  }\n\n  function setSizeDetail() {\n    // if no media queries matched, use the base case\n    sizeDetail = sizeIndex === -1 ? sizes[sizes.length - 1] : sizes[sizeIndex];\n  }\n\n  // column helpers\n\n  function setColumns() {\n    columnHeights = fillArray(sizeDetail.columns);\n  }\n\n  // node helpers\n\n  function setNodes() {\n    nodes = selectors[persist ? 'new' : 'all']();\n  }\n\n  function setNodesDimensions() {\n    // exit if empty container\n    if (nodes.length === 0) {\n      return;\n    }\n\n    nodesWidths = nodes.map(function (element) {\n      return element.clientWidth;\n    });\n    nodesHeights = nodes.map(function (element) {\n      return element.clientHeight;\n    });\n  }\n\n  function setNodesStyles() {\n    nodes.forEach(function (element, index) {\n      columnTarget = columnHeights.indexOf(Math.min.apply(Math, columnHeights));\n\n      element.style.position = 'absolute';\n\n      nodeTop = columnHeights[columnTarget] + 'px';\n      nodeLeft = columnTarget * nodesWidths[index] + columnTarget * sizeDetail.gutter + 'px';\n\n      // support positioned elements (default) or transformed elements\n      if (position) {\n        element.style.top = nodeTop;\n        element.style.left = nodeLeft;\n      } else {\n        element.style.transform = 'translate3d(' + nodeLeft + ', ' + nodeTop + ', 0)';\n      }\n\n      element.setAttribute(packed, '');\n\n      // ignore nodes with no width and/or height\n      nodeWidth = nodesWidths[index];\n      nodeHeight = nodesHeights[index];\n\n      if (nodeWidth && nodeHeight) {\n        columnHeights[columnTarget] += nodeHeight + sizeDetail.gutter;\n      }\n    });\n  }\n\n  // container helpers\n\n  function setContainerStyles() {\n    container.style.position = 'relative';\n    container.style.width = sizeDetail.columns * nodeWidth + (sizeDetail.columns - 1) * sizeDetail.gutter + 'px';\n    container.style.height = Math.max.apply(Math, columnHeights) - sizeDetail.gutter + 'px';\n  }\n\n  // resize helpers\n\n  function resizeFrame() {\n    if (!ticking) {\n      window.requestAnimationFrame(resizeHandler);\n      ticking = true;\n    }\n  }\n\n  function resizeHandler() {\n    if (sizeIndex !== getSizeIndex()) {\n      pack();\n      instance.emit('resize', sizeDetail);\n    }\n\n    ticking = false;\n  }\n\n  // API\n\n  function pack() {\n    persist = false;\n    runSeries(setup.concat(run));\n\n    return instance.emit('pack');\n  }\n\n  function update() {\n    persist = true;\n    runSeries(run);\n\n    return instance.emit('update');\n  }\n\n  function resize() {\n    var flag = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    var action = flag ? 'addEventListener' : 'removeEventListener';\n\n    window[action]('resize', resizeFrame);\n\n    return instance;\n  }\n};\n\nexport default bricks;\n","import Bricks from 'bricks.js'\n\nconst instance = Bricks({\n    container: '#brick',\n    packed: 'data-packed',\n    sizes: [\n        { columns: 2, gutter: 50 },\n        { mq: '1440px', columns: 3, gutter: 40 }\n    ]\n})\n\ndocument.querySelector('#brick').style.margin = \"0 auto\";\n\ninstance.resize(true);\ninstance.pack();"]}